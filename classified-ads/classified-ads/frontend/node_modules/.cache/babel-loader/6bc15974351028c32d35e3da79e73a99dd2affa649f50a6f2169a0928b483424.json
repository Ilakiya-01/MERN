{"ast":null,"code":"var _jsxFileName = \"D:\\\\MERN-lab\\\\classified-ads\\\\classified-ads\\\\frontend\\\\src\\\\components\\\\Chat\\\\ChatList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport AuthContext from '../../context/AuthContext';\nimport api from '../../services/api';\nimport './ChatList.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatList = () => {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const [conversations, setConversations] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    if (!user) {\n      navigate('/login');\n      return;\n    }\n    fetchConversations();\n  }, [user, navigate]);\n  const fetchConversations = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const res = await api.get('/chat/conversations', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setConversations(res.data.data);\n    } catch (error) {\n      console.error('Error fetching conversations:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-list-loading\",\n      children: \"Loading conversations...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-list-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-list-header\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"My Conversations\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), conversations.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-conversations\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No conversations yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Start chatting with sellers from product pages!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        className: \"browse-btn\",\n        children: \"Browse Products\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"conversations-list\",\n      children: conversations.map(conversation => {\n        var _conversation$lastMes;\n        return /*#__PURE__*/_jsxDEV(Link, {\n          to: `/chat/${conversation.userId}`,\n          className: \"conversation-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"conversation-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: conversation.userName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"last-message\",\n              children: ((_conversation$lastMes = conversation.lastMessage) === null || _conversation$lastMes === void 0 ? void 0 : _conversation$lastMes.content) || 'No messages yet'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"conversation-meta\",\n            children: [conversation.lastMessage && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"last-message-time\",\n              children: new Date(conversation.lastMessage.timestamp).toLocaleDateString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 19\n            }, this), conversation.unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"unread-badge\",\n              children: conversation.unreadCount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this)]\n        }, conversation.userId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatList, \"xxhLcPnQ7LY6fPs/r2B6sy+YSs0=\", false, function () {\n  return [useNavigate];\n});\n_c = ChatList;\nexport default ChatList;\nvar _c;\n$RefreshReg$(_c, \"ChatList\");","map":{"version":3,"names":["React","useState","useEffect","useContext","Link","useNavigate","AuthContext","api","jsxDEV","_jsxDEV","ChatList","_s","user","navigate","conversations","setConversations","loading","setLoading","fetchConversations","token","localStorage","getItem","res","get","headers","Authorization","data","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","to","map","conversation","_conversation$lastMes","userId","userName","lastMessage","content","Date","timestamp","toLocaleDateString","unreadCount","_c","$RefreshReg$"],"sources":["D:/MERN-lab/classified-ads/classified-ads/frontend/src/components/Chat/ChatList.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport AuthContext from '../../context/AuthContext';\nimport api from '../../services/api';\nimport './ChatList.css';\n\nconst ChatList = () => {\n  const { user } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const [conversations, setConversations] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!user) {\n      navigate('/login');\n      return;\n    }\n\n    fetchConversations();\n  }, [user, navigate]);\n\n  const fetchConversations = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const res = await api.get('/chat/conversations', {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setConversations(res.data.data);\n    } catch (error) {\n      console.error('Error fetching conversations:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return <div className=\"chat-list-loading\">Loading conversations...</div>;\n  }\n\n  return (\n    <div className=\"chat-list-container\">\n      <div className=\"chat-list-header\">\n        <h2>My Conversations</h2>\n      </div>\n\n      {conversations.length === 0 ? (\n        <div className=\"no-conversations\">\n          <p>No conversations yet.</p>\n          <p>Start chatting with sellers from product pages!</p>\n          <Link to=\"/\" className=\"browse-btn\">\n            Browse Products\n          </Link>\n        </div>\n      ) : (\n        <div className=\"conversations-list\">\n          {conversations.map((conversation) => (\n            <Link\n              key={conversation.userId}\n              to={`/chat/${conversation.userId}`}\n              className=\"conversation-item\"\n            >\n              <div className=\"conversation-info\">\n                <h3>{conversation.userName}</h3>\n                <p className=\"last-message\">\n                  {conversation.lastMessage?.content || 'No messages yet'}\n                </p>\n              </div>\n              <div className=\"conversation-meta\">\n                {conversation.lastMessage && (\n                  <span className=\"last-message-time\">\n                    {new Date(conversation.lastMessage.timestamp).toLocaleDateString()}\n                  </span>\n                )}\n                {conversation.unreadCount > 0 && (\n                  <span className=\"unread-badge\">{conversation.unreadCount}</span>\n                )}\n              </div>\n            </Link>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ChatList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}